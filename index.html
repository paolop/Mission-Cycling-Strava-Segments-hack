<html>
<head>
<title>Strava Segment Test</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    function bestSegmentEffortByClub(emit, clubId, segmentId, startDate, endDate) {
        //http://www.strava.com/api/v1/segments/229781/efforts?clubId=15&best=true&startDate=2011-03-05&endDate=2011-03-06"
        var uri = "./data/" + startDate + "/" + segmentId + ".json;
        $.getJSON(uri, function(data) {
                $.each(data.efforts, function(i, item) {
                    emit(item);
                })
        });

    }
    $(document).ready(function() {
        var emit = function(item) {
            var items = [];
            items.push('<li id="' + item.id + '">' + item.athlete.name + '</li>');
            $('<ul/>', {
                'class': 'effort-list',
                html: items.join('')
            }).appendTo('body');
        };
        bestSegmentEffortByClub(emit);
    });
</script>
</head>
<body>
</body>
</html> 
